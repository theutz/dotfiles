#!/usr/bin/env nu

const self = path self
source ($self | path dirname | path join "../common.nu")

def "highlighted" [mode]: nothing -> string {
  match ($mode) { main => "off", _ => "on" }
}

aerospace list-modes --current
| [
  --animate quadratic 10
  --bar color=(highlighted $in | bar color --highlight=($in == on))
  --set aerospace_mode
  icon.highlight=(highlighted $in)
  label.drawing=(highlighted $in)
  label=($in)
]
| each { into string }
| run-external sketchybar ...$in
