#!/usr/bin/env ./nu-wrapper
# vim: ft=nu

aerospace list-workspaces --monitor all --empty
  | lines
  | each {|id|
    [
      --set space.($id)
      icon=󰋙
      icon.highlight=off
    ]
  }
| append (
  aerospace list-workspaces --monitor all --empty no
  | lines
  | each {|id|
    [
      --set space.($id)
      icon=󱗿
      icon.highlight=off
    ]
  }
)
| append (
  aerospace list-workspaces --focused
  | lines
  | each {|id|
    [
      --set space.($id)
      icon.highlight=on
    ]
  }
)
| append (
  aerospace list-workspaces --monitor all --visible
  | lines
  | each {|id|
    [
      --set space.($id)
      icon.highlight=on
      icon.drawing=on
      icon=
    ]
  }
)
| flatten
| run-external sketchybar ...$in
