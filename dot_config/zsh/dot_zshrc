#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/zprezto/init.zsh"
fi

# Customize to your needs...

#
# Contribs
#
contribs=(
	romkatv/zsh-defer
)
for contrib in $contribs; do
	if [[ ! -d $ZPREZTODIR/contrib/${contrib:t} ]]; then
		git clone https://github.com/${contrib} $ZPREZTODIR/contrib/${contrib:t}
	fi
done
unset contrib{,s}

#
# Variables
#

export COMPOSER_HOME="${XDG_CONFIG_HOME:=$HOME}/composer"
export KEYTIMEOUT=1
export MANPAGER='nvim +Man!'
export MANWIDTH=999
export RANGER_LOAD_DEFAULT_RC=false
export TERM="screen-256color"

#
# Functions
#
source "$ZDOTDIR/funcs.zsh"

#
# Aliases
#
source "$ZDOTDIR/aliases.zsh"

#
# Bindings
#
source "$ZDOTDIR/bindings.zsh"

#
# Zoxide
#

function _load_zoxide {
	eval "$(zoxide init zsh)"
}
zsh-defer _load_zoxide

#
# asdf
#

. "$(brew --prefix asdf)"/libexec/asdf.sh

#
# chezmoi
#

function _load_chezmoi {
	source <(chezmoi completion zsh)
}
zsh-defer _load_chezmoi

#
# broot
#

function _load_broot {
	source <(broot --print-shell-function zsh)
	broot --set-install-state installed
}
zsh-defer _load_broot

#
# atuin
#

function _load_atuin {
	eval "$(atuin init zsh)"
}
zsh-defer _load_atuin

#
# fzf
#

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

#
# keychain
#
eval `keychain --eval --agents ssh --inherit any id_rsa id_ed25519`
