#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# Customize to your needs...

echo word
# aliases
source "${ZDOTDIR:-$HOME}/.zsh_aliases"

# broot
eval "$(broot --print-shell-function zsh)"
broot --set-install-state installed > /dev/null

# zoxide
eval "$(zoxide init zsh)"

# asdf
() {
  local asdf_dir
  [[ -f "${asdf_dir::="$(brew --prefix asdf)/libexec/asdf.sh"}" ]] \
    ||[[ -f "${asdf_dir::="$HOME/.asdf/asdf.sh"}" ]]
  source "$asdf_dir"
}

# bob
source <(bob complete zsh)

# 1password (op)
eval "$(op completion zsh)"
compdef _op op

# keychain
() {
  local keys=(
    id_ed25519
    6AEFB22E
    FD235DFD
    48B95546
  )
  eval $(
    keychain \
      --eval \
      --quiet \
      --agents ssh,gpg \
      "$keys[@]"
  )
}

# chezmoi
source <(chezmoi completion zsh)

# direnv
eval "$(direnv hook zsh)"

# pipx
autoload -U bashcompinit
bashcompinit
eval "$(register-python-argcomplete pipx)"

# bindings
bindkey -M vicmd v edit-command-line

# fzf
export FZF_DEFAULT_COMMAND='fd --type f --hidden --exclude .git'
export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh || $(brew --prefix fzf)/install

# nb
export NB_MARKDOWN_TOOL="glow"
