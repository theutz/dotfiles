#  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
#  â”‚                          Global                          â”‚
#  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

set -g mouse on
set -g default-terminal "xterm-256color"
set -ga terminal-overrides ",xterm*:Tc"
set -g destroy-unattached off
set -g detach-on-destroy off
set -g aggressive-resize on
set -g base-index 1
set -g pane-base-index 1
set -g status-keys vi
set -g mode-keys vi
set -g renumber-windows on
set -g set-titles on
set -g pane-border-indicators both
set -g pane-border-lines heavy
set -g window-status-separator ""
set -g visual-activity off
set -g remain-on-exit on

#  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
#  â”‚                 Status Formats & Styles                  â”‚
#  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

#  Colors
#  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

{{ if eq .chezmoi.os "darwin" -}}
set -g @color-session "blue"
set -g @color-window "cyan"
set -g @color-pane "brightblue"
{{- else }}
set -g @color-session "magenta"
set -g @color-window "pink"
set -g @color-pane "purple"
{{- end }}
set -g @color-text "black"
set -g @color-inactive "#54546D"
set -g @color-inactive-bg "#363646"
set -g @color-active-bg "terminal"
set -g @color-success "green"
set -g @color-warning "yellow"
set -g @color-danger "red"

#  Icons
#  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

set -g @cap-round-hard-start "î‚¶"
set -g @cap-round-hard-end "î‚´"
set -g @cap-round-soft-start "î‚·"
set -g @cap-round-soft-end "î‚µ"
set -g @divider-soft-left "î‚±"
set -g @divider-soft-right "î‚³"
set -g @divider-hard-left "î‚°"
set -g @divider-hard-right "î‚²"
set -g @separator "ó°‡™"

#  Reused styles
#  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

set -g @window-flags "\
#[bright]\
#{?window_marked_flag,ïµ ,}\
#{?window_zoomed_flag,ó±‰¶ ,}\
#{?window_bell_flag,ó°µ™ ,}\
#{?window_last_flag,ó±± ,}\
#{?window_activity_flag,ó°›„ ,}\
#{?window_silence_flag,ó°ª“ ,}\
#[nobright]"
set -g @window-status-format "#I #{E:@window-flags}#{@divider-soft-left} #W "

#  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
#  â”‚                         Options                          â”‚
#  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

set -g message-command-style "bg=#{@color-danger} fg=#{@color-text}"
set -g message-style "bg=#{@color-warning} fg=#{@color-text}"
set -g pane-active-border-style "fg=#{@color-pane} bg=#{@color-active-bg}"
set -g pane-border-format "\
#{?pane_dead,#[fg=red],#{?pane_last,#[fg=#{@color-pane}],}}\
 #{?pane_active,#{@divider-hard-right}#[reverse],#[italics]#{@divider-soft-right}}\
 #P #{@divider-soft-left}\
 #{?pane_dead,ó°±® ,ó°‰‹ #{pane_current_path}\
 #{@separator}\
 ó°† #{pane_current_command}}\
 #{?pane_active,#[default]#{?pane_dead,#[fg=red],}#{@divider-hard-left},#{@divider-soft-left}}\
 "
set -g pane-border-indicators both
set -g pane-border-lines heavy
set -g pane-border-status top
set -gF pane-border-style "fg=#{@color-inactive} bg=#{@color-inactive-bg}"

set -g popup-border-lines "rounded"
set -gF popup-border-style "bg=#{@color-inactive-bg}"
set -gF popup-style ""

set -g remain-on-exit-format "#[align=centre fill=#{@color-danger} bg=#{@color-danger} italics] ó°±®  This pane is #[bold underscore]dead#[nounderscore nobold]  ó°±® #[default]"

set -g status-interval 5
set -g status-justify absolute-centre

set -g status-left "#{@cap-round-hard-start}#[reverse] ó°€¥  #S #{@divider-soft-left} ó± #{session_path} #[default]#{@cap-round-hard-end}"
set -g status-left-length 80

set -g status-position bottom

set -g status-right "\
#{?#(ping -c 1 -t 2 google.com; echo $?),#[bg=#{@color-active-bg} fg=#{@color-danger}]#[push-default],}\
#{@cap-round-hard-start}#[reverse]\
 ó°€„ #{user}\
 #{@separator}\
 #(ping -c 1 -t 2 google.com 2>&1 > /dev/null && echo "ó°¹" || echo "ó°–ª")\
 #H\
 #[default]#{@cap-round-hard-end}#[pop-default]"
set -g status-right-length 80

set -g status-style "fg=#{@color-session} bg=terminal"

set -g window-status-activity-style "bold"
set -g window-status-bell-style "fg=#{@color-window}"
set -g window-status-last-style "fg=#{@color-window} nodim"
set -g window-status-current-format "\
#{@cap-round-hard-start}\
#[bg=#{@color-window} fg=#{@color-text}]\
 #{E:@window-status-format}\
#[default]\
#{@cap-round-hard-end}"
set -g window-status-current-style "fg=#{@color-window}"
set -g window-status-format "#[dim]#{@cap-round-soft-start} #{E:@window-status-format}#{@cap-round-soft-end}"
set -gF window-status-separator " #[fg=#{@color-inactive}]â‹…#[default] "
set -g window-status-style "fg=#{@color-inactive} italics"

set -g window-active-style "bg=#{@color-active-bg}"
set -g window-style "bg=#{@color-inactive-bg}"

#  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
#  â”‚                         Plugins                          â”‚
#  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-sessionist'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'laktak/extrakto'
# set -g @plugin 'aserowy/tmux.nvim'

#                                  â”Œ                                           â”
#                                  â”‚ Install tpm & plugins if they don't exist â”‚
#                                  â””                                           â”˜
if "test ! -d ~/.config/tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.config/tmux/plugins/tpm && ~/.config/tmux/plugins/tpm/bin/install_plugins'"

#                           â”Œ                                                  â”
#                           â”‚                   Initialize TMUX plugin manager â”‚
#                           â”‚ (keep this line at the very bottom of tmux.conf) â”‚
#                           â””                                                  â”˜
run '~/.config/tmux/plugins/tpm/tpm'

#  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
#  â”‚                     Plugin overrides                     â”‚
#  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

#  Command aliases
#  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

set -ga command-alias popit='display-popup -w 80% -h 80% -E'

#  Key bindings
#  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

bind-key -N "Clear screen" C-l send-keys 'C-l'
bind-key -N "List all keys" / list-keys
bind-key -N "Respawn pane" r confirm-before -p "Respawn pane? (y/n)" "respawn-pane -k"
bind-key -N "Customize mode" O customize-mode -Z

bind-key -N "Select pane above" h select-pane -LZ
bind-key -N "Select pane above" j select-pane -DZ
bind-key -N "Select pane above" k select-pane -UZ
bind-key -N "Select pane above" l select-pane -RZ
bind-key -N "Select pane above" C-h select-pane -LZ
bind-key -N "Select pane above" C-j select-pane -DZ
bind-key -N "Select pane above" C-k select-pane -UZ
bind-key -N "Select pane above" C-l select-pane -RZ
bind-key -N "Zoom the active pane" C-z resize-pane -Z

#  Popup key table
#  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

bind-key -N "Switch to popup keys table" g switch-client -T popit
bind-key -Tpopit -N "boxes" B popit "boxes -l | less"
bind-key -Tpopit -N "btop" b popit "btop"
bind-key -Tpopit -N "chezmoi" c popit "cd $(chezmoi source-path) && nvim"
bind-key -Tpopit -N "figlet" f popit "showfigfonts | less"
bind-key -Tpopit -N "lazygit" g popit "lazygit"
bind-key -Tpopit -N "nb" n popit "nb shell"

#  Key mode
#  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

set -g status-keys vi
set -g mode-keys vi

#  â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
#  â”‚               Display a message on reload                â”‚
#  â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

display-message -d 4000 "#[fill=green fg=default bg=green reverse]#{@cap-round-hard-start}#[align=centre italics noreverse bg=brightgreen]    ğŸ”ƒ Config file reloaded!    #[align=right bg=green fg=default reverse]#{@cap-round-hard-end}#[default]"

# vim: ft=tmux
