#
# Bindings
#

# Root
# bind-key -N "Scroll page up" -T root 'copy-mode -eu'

# Prefix

unbind-key R

bind-key -N "Rename pane" v command-prompt -I "#{pane_title}" { select-pane -T '%%' }
bind-key -N "Reload config" r source-file $TMUX_CONFIG_FILE \; display-message "Config reloaded!"
bind-key -N "Clear screen" C-l send-keys 'C-l'
bind-key -N "List all keys" / list-keys
bind-key -N "Respawn pane" R confirm-before -p "Respawn pane? (y/n)" "respawn-pane -k"
bind-key -N "Customize mode" O customize-mode -Z
bind-key -N "Kill server" Q confirm-before -p "Kill server? (y/n)" "kill-server"

bind-key -N "Select layout" Space display-menu -xC -yS -T 'Choose layout...' \
  'even-horizontal' h 'select-layout even-horizontal' \
  'even-vertical' v 'select-layout even-vertical' \
  'main-horizontal' H 'select-layout main-horizontal' \
  'main-vertical' V 'select-layout main-vertical' \
  'tiled' t 'select-layout tiled'

bind -N 'Open popup menu' g \
  menu -x C -y C -T 'Popup Menu' \
    'buku' b {
      popup -x C -y S -h 50% -w 120 -T 'buku' -E 'tmux attach -t buku'
    } 'config' c {
      menu -x C -y S -T 'Config Menu' \
        hammerspoon h {
          if '! tmux switchc -t main:hammerspoon' {
            neww -c ~/.hammerspoon -t main: -n hammerspoon nvim
          }
          set -t main:hammerspoon remain-on-exit
        } nvim n {
          if '! tmux switchc -t main:nvim' {
            neww -c ~/.config/nvim -t main: -n nvim nvim
          }
          set -t main:nvim remain-on-exit on
        } tmux t {
          if '! tmux switchc -t main:tmux' {
            neww -c ~/.config/tmux -t main: -n tmux 'nvim tmux.conf'
            splitw -h -t main:tmux 'man tmux'
          }
          set -t main:tmux remain-on-exit on
        } wezterm w {
          if '! tmux switchc -t main:wezterm' {
            neww -c ~/.config/wezterm -t main: -n wezterm nvim
          }
          set -t main:wezterm remain-on-exit on
        }
    } tmux-control g {
      popup -x C -y C -h 20 -w 80 -T 'tmux-control' -E tmux-control
    } nb n {
      popup -x C -y C -h 80% -w 120 -T nb -E 'tmux attach -t nb'
    } spotify_player p {
      popup -x C -y C -h 90% -w 60% -T 'spotify' -E 'tmux attach -t spotify'
    }

# vim: ft=tmux
