encryption = "age"

[gpg]
recipient = "FD235DFD"

[age]
identity = "~/.config/chezmoi/key.txt"
recipient = "age1y5xgp4msrrhylvla0hcm7srsfjeql56p4ugfwsl89wsjs92vkvts3u5xxa"

[git]
autoAdd = true
autoCommit = true
autoPush = true

[cd]
{{ if lookPath "nu" -}}
command = "nu"
{{ else if lookPath "fish" -}}
command = "fish"
{{- end }}

[diff]
{{ if lookPath "difft" -}}
command = "difft"
args = ["--color", "always", "{{ "{{" }} .Destination {{ "}}" }}", "{{ "{{" }} .Target {{ "}}" }}"]
{{ else if lookPath "delta" -}}
command = "delta"
args = ["{{ "{{" }} .Destination {{ "}}" }}", "{{ "{{" }} .Target {{ "}}" }}"]
{{ else -}}
command = "diff"
args = ["{{ "{{" }} .Destination {{ "}}" }}", "{{ "{{" }} .Target {{ "}}" }}"]
{{- end }}
pager = "less -FR"

[merge]
{{- if lookPath "nvim" }}
command = "nvim"
args = [ "-c", "'+norm gg'", "-d", "{{ "{{" }} .Destination {{ "}}" }}", "{{ "{{" }} .Source {{ "}}" }}", "{{ "{{" }} .Target {{ "}}" }}"]
{{ end }}

[edit]
{{- if lookPath "nvim" }}
command = "nvim"
args = ["-c", "cd {{ .chezmoi.sourceDir }}"]
watch = false
apply = false
{{ end }}

{{ $xdg := (dict
  "configDir" (joinPath .chezmoi.homeDir ".config")
  "dataDir" (joinPath .chezmoi.homeDir ".local" "share")
  "stateDir" (joinPath .chezmoi.homeDir ".local" "state")
  "cacheDir" (joinPath .chezmoi.homeDir ".cache")
  )
-}}
[data.xdg]
configDir = "{{ $xdg.configDir }}"
dataDir = "{{ $xdg.dataDir }}"
stateDir = "{{ $xdg.stateDir }}"
cacheDir = "{{ $xdg.cacheDir }}"

{{ with $mise := (dict
  "exe" (joinPath .chezmoi.homeDir ".local" "bin" "mise")
  "configDir" (joinPath .xdg.configDir "mise")
  "shimsDir" (joinPath .xdg.dataDir "mise" "shims")
) -}}
[data.mise]
exe = "{{ $mise.exe }}"
configDir = "{{ $mise.configDir }}"
shimsDir = "{{ $mise.shimsDir }}"

[data.nushell]
{{ with $nu := (dict
  "dir" (joinPath $xdg.configDir "nushell")
  "envFile" (joinPath $nu.dir "env.nu")
  "configFile" (joinPath $nu.dir "config.nu")
  "libDir" (joinPath $nu.dir "scripts")
) -}}
configDir = "{{ $nu.dir }}"
configFile = "{{ $nu.configFile }}"
envFile = "{{ $nu.envFile }}"
libDir = "{{ $nu.libDir }}"
shebang = """\
#!{{ $mise.exe }} exec nushell -- \
nu --include-path {{ $nu.libDir }} \
--env-config {{ $nu.envFile }} \
--config {{ $nu.configFile }}
"""
{{- end }}
{{- end }}

# [status]
# exclude = ["scripts"]

# vim: ft=tmpl.toml
