# vim: ft=zsh

usage() {
  echo "Usage: $0 [-a|--attach] session_name"
}

typeset -A options
zparseopts -A options a=attach --attach=attach h=help --help=help

echo $options
return
if [[ -n $options[help] ]]; then
  usage
  return
fi

session_name="$1"
session="$(tmuxp ls | gum filter --select-if-one --limit=1 --value="$session_name")"

if tmuxp load -d $session && [[ -n $options[attach] ]]; then
  tmux attach -t $session
fi
