#!/usr/bin/env -S nu --config ~/.config/nushell/config.nu

use xdg

let path = xdg config btop btop.conf

let theme = xdg config btop themes (
  match (dark-mode status) {
    off => "latte",
    _ => "mocha"
  }
  | $"catppuccin_($in).theme"
)

open $path
| str replace -r '(?m)^(color_theme =).*$' $'$1 "($theme)"'
| save -f $path
| chezmoi re-add $path
