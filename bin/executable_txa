#!/usr/bin/env zsh

set -euo pipefail

if sessions="$(tmux ls 2>/dev/null | cut -d ':' -f1)"; then
  session="$(echo $sessions | gum filter)"
else
  session="$(tmuxp ls | gum filter)"
  tmuxp load -d "$session"
fi
tmux attach-session -t "$session" &>/dev/null || tmux switch-client -t "$session" &>/dev/null
